{{% extends 'toys/base.html' %}

{% block title %}Toy Details{% endblock %}

{% block content %}
<h2>{{ toy.name }}</h2>
<p>{{ toy.description }}</p>
<p>Price: ${{ toy.price }}</p>
<img src="{{ toy.image.url }}" alt="{{ toy.name }}">
<a href="{% url 'add_to_cart' 'toy' toy.id %}" class="button">Add to Cart</a>

<h3>Accessories</h3>
<ul>
    {% for accessory in accessories %}
        <li>
            <strong>{{ accessory.name }}</strong> - ${{ accessory.price }}
            <img src="{{ accessory.image.url }}" alt="{{ accessory.name }}" style="max-width: 100px;">
            <a href="{% url 'add_to_cart' 'accessory' accessory.id %}" class="button">Add to Cart</a>
        </li>
    {% empty %}
        <p>No accessories available for this toy.</p>
    {% endfor %}
</ul>

<h3>Customer Reviews</h3>
<ul>
    {% for review in reviews %}
        <li>
            <strong>{{ review.user.username }}</strong> - {{ review.rating }} Stars
            <p>{{ review.comment }}</p>
            <small>Reviewed on {{ review.created_at|date:"F j, Y" }}</small>
        </li>
    {% empty %}
        <p>No reviews yet. Be the first to review this toy!</p>
    {% endfor %}
</ul>

{% if user.is_authenticated %}
<h3>Submit Your Review</h3>
<form method="post">
    {% csrf_token %}
    {{ form.as_p }}
    <button type="submit" class="button">Submit Review</button>
</form>
{% else %}
<p>Please <a href="{% url 'login' %}">login</a> to submit a review.</p>
{% endif %}
{% endblock %}